---
title: "How Far Does the Apple Fall From the Tree?"
author: ~
date: "2019-09-26"
slug: how-far-does-the-apple-fall
categories: []
tags: [gedcom]
keywords:
  - gedcom
output: 
  html_document:
    code_folding: hide
---

<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/jquery/jquery.min.js"></script>
<link href="/rmarkdown-libs/leaflet/leaflet.css" rel="stylesheet" />
<script src="/rmarkdown-libs/leaflet/leaflet.js"></script>
<link href="/rmarkdown-libs/leafletfix/leafletfix.css" rel="stylesheet" />
<script src="/rmarkdown-libs/Proj4Leaflet/proj4-compressed.js"></script>
<script src="/rmarkdown-libs/Proj4Leaflet/proj4leaflet.js"></script>
<link href="/rmarkdown-libs/rstudio_leaflet/rstudio_leaflet.css" rel="stylesheet" />
<script src="/rmarkdown-libs/leaflet-binding/leaflet.js"></script>


<div id="introduction" class="section level3">
<h3>Introduction</h3>
<p>During the 4th of July I started to have this question: which of my ancestors served in the Revolutionary War? I began my search for records of proof of service on FamilySearch and Ancestry. As I was clicking up and down my family tree, I wondered if there was a way to read the family history (GEDCOM) files in R. After an in-depth search, I couldn’t find anyone with a good GEDCOM parser that would turn it into CSV format in R (however, a similar project was recently begun; <a href="https://www.r-bloggers.com/gedcom-reader-for-the-r-language-analysing-family-history/" class="uri">https://www.r-bloggers.com/gedcom-reader-for-the-r-language-analysing-family-history/</a>). So, I decided that I would take a crack at it and start exploring my family’s data.</p>
<p>I decided to go with the family tree off of my FamilySearch account mainly because a lot of the searching has been done for you, and their files come with latitudes and longitudes. One thing to keep in mind, the farther back you go in your tree, the information may not be correct. Luckily, someone already built a way to get your GEDCOM file from FamilySearch. It does require python3. You can go to their site to learn more:</p>
<p><a href="https://github.com/Linekio/getmyancestors" class="uri">https://github.com/Linekio/getmyancestors</a></p>
<p>You can also get a GEDCOM file off of Ancestry by following these instructions:</p>
<p><a href="https://support.ancestry.com/s/article/Uploading-and-Downloading-Trees" class="uri">https://support.ancestry.com/s/article/Uploading-and-Downloading-Trees</a></p>
<p>Feel free to use my read_gedcom function from here:</p>
<pre class="r"><code># install.packages(&quot;devtools&quot;)
devtools::install_github(&quot;jjfitz/readgedcom&quot;)</code></pre>
<p>It is still in the developmental stages, but in its current format, it is able to grab useful information such as names, birth/death dates, birth/death places, what family they come from, and what children they had. It does not gather everything that a GEDCOM file stores, but I will be working on it gathering more information shortly.</p>
<p>As mentioned earlier, I will demonstrate this idea using my own line, albeit with changes to locations and other identifiable information. The following graphic is a density plot showing the ages of my direct ancestors.</p>
<pre class="r"><code># Density
gd %&gt;%
  filter(age &lt; 120 &amp; age &gt; 0) %&gt;%
  ggplot(aes(age, color = sex)) +
  geom_density()</code></pre>
<p><img src="/post/Genealogy_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<p>In this dataset, I went back 10 generations. It was able to provide 656 males and 630 females.</p>
<p>Next, I built out a pedigree chart.</p>
<pre class="r"><code>gd$FAMS[1] &lt;- gd$FAMC[1]
fam_graph &lt;- gd %&gt;%
  mutate(FAMS = if_else(FAMS == &quot;&quot;, FAMC, FAMS)) %&gt;%
  filter(FAMC != &quot;&quot;, generation &lt; 5) %&gt;%
  select(FAMS, FAMC, anc_title) %&gt;%
  graph_from_data_frame()

g_name &lt;- gd %&gt;%
  mutate(FAMS = if_else(FAMS == &quot;&quot;, FAMC, FAMS)) %&gt;%
  filter(FAMC != &quot;&quot;, generation &lt; 5) %&gt;%
  select(FAMS, FAMC, anc_title)

g_name$V_verts &lt;- V(fam_graph)$name

correct_name &lt;- g_name %&gt;%
  left_join(gd, by = c(&quot;V_verts&quot; = &quot;FAMC&quot;))

fam_graph &lt;- correct_name %&gt;%
  mutate(FAMS.x = if_else(FAMS.x == &quot;&quot;, FAMC, FAMS.x)) %&gt;%
  filter(FAMC != &quot;&quot;, generation &lt; 5) %&gt;%
  select(FAMS.x, FAMC, anc_title.y) %&gt;%
  graph_from_data_frame()

V(fam_graph)$F_name &lt;- E(fam_graph)$anc_title.y

ggraph(fam_graph, layout = &quot;dendrogram&quot;) +
  geom_edge_link() +
  geom_node_point() +
  geom_node_text(aes(label = F_name), vjust = 1, hjust = 1, angle = 35) +
  expand_limits(x = -.5, y = -.5)</code></pre>
<p><img src="/post/Genealogy_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>I was also curious about my ancestors’ migratory path, so here is a map displaying that path, with me as generation 0.</p>
<pre class="r"><code>gd %&lt;&gt;%
  filter(generation &lt; 7)

leaflet() %&gt;%
  addTiles() %&gt;%
  addCircles(lng = gd$birthlong, 
             lat = gd$birthlat,
             popup = paste0(&quot;Id: &quot;, gd$id, &quot;&lt;br /&gt;&quot;,
                            &quot;Birth Place: &quot;, gd$birthplace, &quot;&lt;br /&gt;&quot;
                            ),
             color = gd$gencol) %&gt;%
  addLegend(colors = levels(as_factor(gd$gencol)), labels = levels(as_factor(gd$generation)))</code></pre>
<div id="htmlwidget-1" style="width:672px;height:480px;" class="leaflet html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addCircles","args":[[33.4355977,44.977753,29.9940924,33.7455731,35.410694,30.3960318,33.9971974,42.9764027,41.6266555,33.5225261,38.4192496,40.6936488,44.0805434,40.4862157,39.1434406,42.0028761,34.0922335,30.3118769,38.8048355,26.2034071,34.0686208,41.6612104,28.0836269,33.4150485,40.7878788,35.7795897,44.9211836,41.117744,26.640628,28.6611089,35.8422967,40.5852602,41.452819,33.660297,40.7878788,33.0806083,38.1341477,33.6469661,38.4192496,32.7947731,38.7874699,40.7933949,42.0883603,34.09751,34.0961111,37.4323341,33.0198431,39.7390721,42.0834335,34.4047987,42.3736158,26.6617635,39.8403147,31.3112936,35.9940329,35.0886963,45.7832856,42.4733688,40.6668916,34.6391501,40.9312099,32.4709761,34.9530337,34.8526176,30.8327022,34.4208305,25.72149,36.0625795,41.408969,33.9166805,41.6639383,30.421309,29.4241219,38.0293059,42.1662831,37.3058839,42.732535,33.6839473,41.525031,28.8052674,39.0997265,36.8529263,39.3995008,43.6155825,38.3396367,42.4184296,33.8816818,35.3732921,42.3636331,41.6611277,41.878711,42.1014831,43.2341813,42.240872,29.6516344,33.660297,40.6687141,42.0324025,44.0462362,41.8850317,39.0997265,38.7907339,26.0764783,32.7764749,42.0255827,42.4084302,37.3860517,41.6986416,47.1853785,41.1865478,33.8169599,42.0986867,32.8342952,47.6162683,35.2045328,35.5950581,41.49932,40.4594021,38.7509488,38.9716689,41.2375569,32.6518004,47.0378741,35.6145169,47.4828776,39.158168,37.0965278],[-112.3496021,-93.2650108,-90.2417434,-117.8678338,-80.8428504,-88.8853078,-117.4854802,-88.1084224,-93.7121656,-117.7075526,-82.445154,-89.5889864,-103.2310149,-74.4518188,-77.2013705,-71.5147839,-117.435048,-95.4560512,-77.0469214,-98.2300124,-117.9389526,-72.7795419,-80.6081089,-111.5495777,-74.0143064,-78.6381787,-93.4687489,-73.4081575,-81.8723084,-81.3656242,-90.704279,-105.084423,-82.1823746,-117.9992265,-74.0143064,-96.8928309,-121.2722194,-117.689218,-82.445154,-116.9625269,-90.6298922,-77.8600012,-87.9806265,-117.6483876,-118.1058333,-121.8995741,-96.6988856,-75.5397878,-71.0183787,-103.2052272,-71.1097335,-80.2683571,-88.9548001,-92.4451371,-78.898619,-92.4421011,-108.5006904,-83.2218731,-111.8879909,-120.4579409,-73.8987469,-85.0007653,-120.4357191,-82.3940104,-83.2784851,-119.6981901,-80.2683838,-94.1574263,-75.6624122,-117.9000604,-83.555212,-87.2169149,-98.4936282,-78.4766781,-87.9631308,-89.5181476,-84.5555347,-117.7946942,-88.0817251,-97.0035982,-94.5785667,-75.977985,-84.5613355,-84.2472116,-122.7010984,-71.1061639,-118.1170117,-119.0187125,-87.8447938,-91.5301683,-71.3825558,-72.589811,-86.2483921,-83.2696509,-82.3248262,-117.9992265,-74.1143091,-87.7416246,-123.0220289,-87.7845025,-94.5785667,-121.2357828,-80.2521157,-79.9310512,-88.1784085,-71.0119948,-122.0838511,-88.0683955,-122.2928974,-73.1951767,-118.0372852,-75.9179738,-97.2289029,-122.0355736,-89.8739753,-82.5514869,-81.6943605,-74.360846,-77.4752667,-95.2352501,-80.8184166,-96.9083366,-122.9006951,-88.8139469,-122.2170661,-75.5243682,-113.5684164],10,null,null,{"interactive":true,"className":"","stroke":true,"color":["black","green","green","blue","blue","blue","blue","red","red","red","red","red","red","red","red","pink","pink","pink","pink","pink","pink","pink","pink","pink","pink","pink","pink","pink","pink","pink","pink","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey"],"weight":5,"opacity":0.5,"fill":true,"fillColor":["black","green","green","blue","blue","blue","blue","red","red","red","red","red","red","red","red","pink","pink","pink","pink","pink","pink","pink","pink","pink","pink","pink","pink","pink","pink","pink","pink","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","purple","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey","grey"],"fillOpacity":0.2},["Id: @I1@<br />Birth Place: Avondale, Arizona<br />","Id: @I2@<br />Birth Place: Minneapolis, Minnesota<br />","Id: @I3@<br />Birth Place: Kenner, Louisiana<br />","Id: @I4@<br />Birth Place: Santa Ana, California<br />","Id: @I5@<br />Birth Place: Huntersville, North Carolina<br />","Id: @I6@<br />Birth Place: Biloxi, Mississippi<br />","Id: @I7@<br />Birth Place: Jurupa Valley, California<br />","Id: @I8@<br />Birth Place: New Berlin, Wisconsin<br />","Id: @I9@<br />Birth Place: Urbandale, Iowa<br />","Id: @I10@<br />Birth Place: Laguna Niguel, California<br />","Id: @I11@<br />Birth Place: Huntington, West Virginia<br />","Id: @I12@<br />Birth Place: Peoria, Illinois<br />","Id: @I13@<br />Birth Place: Rapid City, South Dakota<br />","Id: @I14@<br />Birth Place: New Brunswick, New Jersey<br />","Id: @I15@<br />Birth Place: Gaithersburg, Maryland<br />","Id: @I16@<br />Birth Place: Woonsocket, Rhode Island<br />","Id: @I17@<br />Birth Place: Fontana, California<br />","Id: @I18@<br />Birth Place: Conroe, Texas<br />","Id: @I19@<br />Birth Place: Alexandria, Virginia<br />","Id: @I20@<br />Birth Place: McAllen, Texas<br />","Id: @I21@<br />Birth Place: West Covina, California<br />","Id: @I22@<br />Birth Place: New Britain, Connecticut<br />","Id: @I23@<br />Birth Place: Melbourne, Florida<br />","Id: @I24@<br />Birth Place: Apache Junction, Arizona<br />","Id: @I25@<br />Birth Place: West New York, New Jersey<br />","Id: @I26@<br />Birth Place: Raleigh, North Carolina<br />","Id: @I27@<br />Birth Place: Minnetonka, Minnesota<br />","Id: @I28@<br />Birth Place: Norwalk, Connecticut<br />","Id: @I29@<br />Birth Place: Fort Myers, Florida<br />","Id: @I30@<br />Birth Place: Altamonte Springs, Florida<br />","Id: @I31@<br />Birth Place: Jonesboro, Arkansas<br />","Id: @I32@<br />Birth Place: Fort Collins, Colorado<br />","Id: @I33@<br />Birth Place: Lorain, Ohio<br />","Id: @I34@<br />Birth Place: Huntington Beach, California<br />","Id: @I35@<br />Birth Place: West New York, New Jersey<br />","Id: @I36@<br />Birth Place: The Colony, Texas<br />","Id: @I37@<br />Birth Place: Lodi, California<br />","Id: @I38@<br />Birth Place: Lake Forest, California<br />","Id: @I39@<br />Birth Place: Huntington, West Virginia<br />","Id: @I40@<br />Birth Place: El Cajon, California<br />","Id: @I41@<br />Birth Place: St. Peters, Missouri<br />","Id: @I42@<br />Birth Place: State College, Pennsylvania<br />","Id: @I43@<br />Birth Place: Arlington Heights, Illinois<br />","Id: @I44@<br />Birth Place: Upland, California<br />","Id: @I45@<br />Birth Place: San Gabriel, California<br />","Id: @I46@<br />Birth Place: Milpitas, California<br />","Id: @I47@<br />Birth Place: Plano, Texas<br />","Id: @I48@<br />Birth Place: Wilmington, Delaware<br />","Id: @I49@<br />Birth Place: Brockton, Massachusetts<br />","Id: @I50@<br />Birth Place: Clovis, New Mexico<br />","Id: @I51@<br />Birth Place: Cambridge, Massachusetts<br />","Id: @I52@<br />Birth Place: Wellington, Florida<br />","Id: @I53@<br />Birth Place: Decatur, Illinois<br />","Id: @I54@<br />Birth Place: Alexandria, Louisiana<br />","Id: @I55@<br />Birth Place: Durham, North Carolina<br />","Id: @I56@<br />Birth Place: Conway, Arkansas<br />","Id: @I57@<br />Birth Place: Billings, Montana<br />","Id: @I58@<br />Birth Place: Southfield, Michigan<br />","Id: @I59@<br />Birth Place: Murray, Utah<br />","Id: @I60@<br />Birth Place: Lompoc, California<br />","Id: @I61@<br />Birth Place: Yonkers, New York<br />","Id: @I62@<br />Birth Place: Phenix City, Alabama<br />","Id: @I63@<br />Birth Place: Santa Maria, California<br />","Id: @I64@<br />Birth Place: Greenville, South Carolina<br />","Id: @I65@<br />Birth Place: Valdosta, Georgia<br />","Id: @I66@<br />Birth Place: Santa Barbara, California<br />","Id: @I67@<br />Birth Place: Coral Gables, Florida<br />","Id: @I68@<br />Birth Place: Fayetteville, Arkansas<br />","Id: @I69@<br />Birth Place: Scranton, Pennsylvania<br />","Id: @I70@<br />Birth Place: Brea, California<br />","Id: @I71@<br />Birth Place: Toledo, Ohio<br />","Id: @I72@<br />Birth Place: Pensacola, Florida<br />","Id: @I73@<br />Birth Place: San Antonio, Texas<br />","Id: @I74@<br />Birth Place: Charlottesville, Virginia<br />","Id: @I75@<br />Birth Place: Buffalo Grove, Illinois<br />","Id: @I76@<br />Birth Place: Cape Girardeau, Missouri<br />","Id: @I77@<br />Birth Place: Lansing, Michigan<br />","Id: @I78@<br />Birth Place: Irvine, California<br />","Id: @I79@<br />Birth Place: Joliet, Illinois<br />","Id: @I80@<br />Birth Place: Victoria, Texas<br />","Id: @I81@<br />Birth Place: Kansas City, Missouri<br />","Id: @I82@<br />Birth Place: Virginia Beach, Virginia<br />","Id: @I83@<br />Birth Place: Hamilton, Ohio<br />","Id: @I84@<br />Birth Place: Midland, Michigan<br />","Id: @I85@<br />Birth Place: Rohnert Park, California<br />","Id: @I86@<br />Birth Place: Medford, Massachusetts<br />","Id: @I87@<br />Birth Place: Bellflower, California<br />","Id: @I88@<br />Birth Place: Bakersfield, California<br />","Id: @I89@<br />Birth Place: Waukegan, Illinois<br />","Id: @I90@<br />Birth Place: Iowa City, Iowa<br />","Id: @I91@<br />Birth Place: Pawtucket, Rhode Island<br />","Id: @I92@<br />Birth Place: Springfield, Massachusetts<br />","Id: @I93@<br />Birth Place: Muskegon, Michigan<br />","Id: @I94@<br />Birth Place: Taylor, Michigan<br />","Id: @I95@<br />Birth Place: Gainesville, Florida<br />","Id: @I96@<br />Birth Place: Huntington Beach, California<br />","Id: @I97@<br />Birth Place: Bayonne, New Jersey<br />","Id: @I98@<br />Birth Place: Skokie, Illinois<br />","Id: @I99@<br />Birth Place: Springfield, Oregon<br />","Id: @I100@<br />Birth Place: Oak Park, Illinois<br />","Id: @I101@<br />Birth Place: Kansas City, Missouri<br />","Id: @I102@<br />Birth Place: Rocklin, California<br />","Id: @I103@<br />Birth Place: Davie, Florida<br />","Id: @I104@<br />Birth Place: Charleston, South Carolina<br />","Id: @I105@<br />Birth Place: Streamwood, Illinois<br />","Id: @I106@<br />Birth Place: Revere, Massachusetts<br />","Id: @I107@<br />Birth Place: Mountain View, California<br />","Id: @I108@<br />Birth Place: Bolingbrook, Illinois<br />","Id: @I109@<br />Birth Place: Puyallup, Washington<br />","Id: @I110@<br />Birth Place: Bridgeport, Connecticut<br />","Id: @I111@<br />Birth Place: Cypress, California<br />","Id: @I112@<br />Birth Place: Binghamton, New York<br />","Id: @I113@<br />Birth Place: North Richland Hills, Texas<br />","Id: @I114@<br />Birth Place: Sammamish, Washington<br />","Id: @I115@<br />Birth Place: Bartlett, Tennessee<br />","Id: @I116@<br />Birth Place: Asheville, North Carolina<br />","Id: @I117@<br />Birth Place: Cleveland, Ohio<br />","Id: @I118@<br />Birth Place: Sayreville, New Jersey<br />","Id: @I119@<br />Birth Place: Manassas, Virginia<br />","Id: @I120@<br />Birth Place: Lawrence, Kansas<br />","Id: @I121@<br />Birth Place: Warren, Ohio<br />","Id: @I122@<br />Birth Place: Duncanville, Texas<br />","Id: @I123@<br />Birth Place: Olympia, Washington<br />","Id: @I124@<br />Birth Place: Jackson, Tennessee<br />","Id: @I125@<br />Birth Place: Renton, Washington<br />","Id: @I126@<br />Birth Place: Dover, Delaware<br />","Id: @I127@<br />Birth Place: St. George, Utah<br />"],null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null,null]},{"method":"addLegend","args":[{"colors":["black","green","blue","red","pink","purple","grey"],"labels":["0","1","2","3","4","5","6"],"na_color":null,"na_label":"NA","opacity":0.5,"position":"topright","type":"unknown","title":null,"extra":null,"layerId":null,"className":"info legend","group":null}]}],"limits":{"lat":[25.72149,47.6162683],"lng":[-123.0220289,-71.0119948]}},"evals":[],"jsHooks":[]}</script>
<p>While the general migratory path was interesting, I wanted to focus on the descendants of someone specific, so I found the first member of my family to be born in America on my paternal side, and mapped out his descendants. The following .gif portrays the migratory path of that ancestor (who, incidentally, did fight in the Revolutionary War!) and his descendants.</p>
<!-- ![](../../static/img/generation.gif) -->
<p><img src="https://raw.githubusercontent.com/jjfitz/blogdown_source/master/static/img/generation.gif" /></p>
<p>There are other questions that would be fun to explore, such as: Is there any intermingling between other trees in my line? Who had the most living descendants before they died? What is the average distance between where they were born and where they died?</p>
<p>I hope that this parser can aid others in learning more about their family history, as well as make it easier for those who are just beginning to find the gaps in their heritage.</p>
<p><br />
<br />
<br />
<br />
<br /></p>
</div>
